# AIS FILTER POSTGRESQL

Before much of the machine learning could be done, there was a dire need to filter raw AIS data for potential interactions. COLREGS interactions potentially occur when one or more ships are within viewing distance of one another. To answer the question "what ships are within sight of a single ship given a time interval" is a difficult question. Our team developed a filtering method using POSTGRESQL and POSTGIS to find pairs of ships who are within a visual distance of one another given a time period.

POSTGRESQL was stood up on AWS RDS for the project. We used the POSTGIS extention to manipulate GIS related data very quickly. AIS data was uploaded into the database as a single table. Unique MMSIs were identified and were aggregated into hour intervals via Python. Each row represented the path of a ship during a single hour. Several statistics were calculated related to speed, time, location, etc. Most importantly we created objects of type geometry representing the path of the ship during that time interval. The geometry is created by the path of the ship (points) with a 4 nautical mile (converted into meters) buffer extended around the path. These geometries were indexed and allowed for overlap (intersection) queries to be quickly made. This index, via R-trees, allows us to identify possible interactions between ships without exponential pair-wise comparisons.

This filtered data was then ingested by our machine learning team for additional filtering, noise reduction, enrichment, and ingestion into various machine learning algorithms.
