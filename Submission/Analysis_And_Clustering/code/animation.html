<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>Animate a point along a route</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.49.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.49.0/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>

<style>
.overlay {
    position: absolute;
    top: 10px;
    left: 10px;
}

.overlay button {
    font:600 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
    background-color: #3386c0;
    color: #fff;
    display: inline-block;
    margin: 0;
    padding: 10px 20px;
    border: none;
    cursor: pointer;
    border-radius: 3px;
}

.overlay button:hover {
    background-color:#4ea0da;
}
</style>
<script src='https://api.tiles.mapbox.com/mapbox.js/plugins/turf/v2.0.0/turf.min.js' charset='utf-8'></script>

<div id='map'></div>
<div class='overlay'>
    <button id='replay'>Replay</button>
</div>

<script>
pathAData =[[-174.00038, 52.52381999999999], [-174.00698, 52.5229], [-174.01195, 52.5222], [-174.01707, 52.52145], [-174.02213, 52.5207], [-174.48513, 52.46363], [-174.5021, 52.46208000000001], [-174.55613, 52.45757], [-174.5814, 52.455580000000005], [-174.58698, 52.45515], [-174.59237, 52.45478000000001], [-174.60383000000002, 52.45401999999999], [-174.60912, 52.453619999999994], [-174.6148, 52.45316999999999], [-174.62028, 52.452769999999994], [-174.62493, 52.4524], [-174.63035, 52.45203000000001], [-174.63613, 52.4516], [-174.64495, 52.451], [-174.65043, 52.4506], [-174.66078000000002, 52.4497], [-174.66623, 52.449180000000005], [-174.67185, 52.44865], [-174.6766, 52.4482], [-174.68208, 52.4477], [-174.68838, 52.44715], [-174.6939, 52.44667], [-174.70378, 52.4458], [-174.70933, 52.44525], [-174.7148, 52.44477], [-174.72055, 52.44425], [-174.72613, 52.443780000000004], [-174.73776999999998, 52.4428], [-174.74337, 52.44225], [-174.74877, 52.44165], [-174.75455, 52.44093], [-174.7604, 52.44023000000001], [-174.76582, 52.439569999999996], [-174.77055, 52.43897], [-174.77615, 52.43825], [-174.78178, 52.43748000000001], [-174.78746999999998, 52.436530000000005], [-174.79258000000002, 52.435430000000004], [-174.79783, 52.434180000000005], [-174.80298, 52.433], [-174.80802, 52.43196999999999], [-174.81348, 52.4309], [-174.81868, 52.4299], [-174.824, 52.428819999999995], [-174.82985, 52.42747], [-174.83803, 52.42543], [-174.87216999999998, 52.41735], [-174.87732, 52.41622], [-174.88495, 52.41453], [-174.89072, 52.41328], [-174.89598, 52.41213], [-174.901, 52.41082], [-174.90612, 52.40932], [-174.91178, 52.40777], [-174.91678000000002, 52.40657], [-174.92203, 52.40545], [-174.93255, 52.4034], [-174.93837, 52.40215], [-174.9434, 52.40105], [-174.9486, 52.39983], [-174.95352, 52.39873], [-174.95946999999998, 52.397420000000004], [-174.9656, 52.39615], [-174.98407, 52.392379999999996], [-175.00422, 52.388], [-175.01463, 52.386], [-175.01991999999998, 52.38498], [-175.02525, 52.38397], [-175.03042, 52.38292], [-175.03488000000002, 52.38198], [-175.04012, 52.38085], [-175.0452, 52.3798], [-175.05052, 52.37875], [-175.05558, 52.37777], [-175.06165, 52.37665], [-175.06667, 52.37573], [-175.07197, 52.37473], [-175.0772, 52.37372], [-175.0825, 52.37273], [-175.10237, 52.37097], [-175.10983000000002, 52.3703], [-175.1447, 52.36652], [-175.15013000000002, 52.36592], [-175.15633, 52.36527], [-175.16143, 52.36473], [-175.16693, 52.36422], [-175.17221999999998, 52.36375], [-175.1776, 52.36318], [-175.18263000000002, 52.36267], [-175.18793, 52.36213], [-175.19335, 52.36163], [-175.19857, 52.36117], [-175.20405, 52.36072], [-175.20913000000002, 52.36032], [-175.21468000000002, 52.3598], [-175.21975, 52.359320000000004], [-175.22612, 52.35875], [-175.23133, 52.35833], [-175.23643, 52.357929999999996], [-175.24182, 52.35752], [-175.24742, 52.35707], [-175.25245, 52.35658], [-175.25768, 52.35607], [-175.26305, 52.35557], [-175.26852, 52.3551], [-175.27375, 52.3547], [-175.27913, 52.354279999999996], [-175.28433, 52.35388], [-175.28987, 52.3534], [-175.29498, 52.35297], [-175.3004, 52.35248], [-175.30567, 52.35198], [-175.31103000000002, 52.35145], [-175.31625, 52.35093], [-175.32137, 52.35045], [-175.3267, 52.34988], [-175.33192, 52.34938], [-175.33727, 52.34883], [-175.34177, 52.34835], [-175.34693000000001, 52.347770000000004], [-175.35168000000002, 52.3473], [-175.3568, 52.346779999999995], [-175.36196999999999, 52.34625], [-175.36727, 52.34568], [-175.37255, 52.345079999999996], [-175.37687, 52.344570000000004], [-175.38217, 52.34395], [-175.3875, 52.3434], [-175.39275, 52.34282], [-175.39807, 52.3422], [-175.4033, 52.34163], [-175.40867, 52.341029999999996], [-175.4138, 52.34048], [-175.41923, 52.33982], [-175.42443, 52.33918], [-175.4296, 52.33862], [-175.435, 52.338029999999996], [-175.44023, 52.33743], [-175.44557, 52.33677], [-175.45016999999999, 52.336220000000004], [-175.4554, 52.335570000000004], [-175.46083000000002, 52.33493], [-175.46628, 52.33423], [-175.47153, 52.33358], [-175.47695, 52.332879999999996], [-175.48235, 52.332229999999996], [-175.48772, 52.33157], [-175.49285, 52.33083], [-175.49808000000002, 52.330020000000005], [-175.50355, 52.32918], [-175.50893, 52.328379999999996], [-175.51418, 52.3276], [-175.51958, 52.32683], [-175.52475, 52.32612], [-175.52997, 52.32528], [-175.53531999999998, 52.32447], [-175.54072, 52.323679999999996], [-175.54605, 52.32297], [-175.55118000000002, 52.32232], [-175.556, 52.32175], [-175.56133, 52.32107], [-175.56642, 52.32038], [-175.57197, 52.31958], [-175.57733000000002, 52.31885], [-175.58192, 52.3183], [-175.5872, 52.31777], [-175.59237, 52.3173], [-175.59792, 52.31677], [-175.60318, 52.31623], [-175.60858000000002, 52.315670000000004], [-175.61393, 52.3151]]

pathBData = [[-174.85021, 52.76364], [-174.94955, 52.762190000000004], [-175.03693, 52.76068000000001], [-175.10844, 52.75943], [-175.31465, 52.75553000000001], [-175.78765, 52.74544], [-175.80246, 52.745], [-175.81409, 52.744690000000006], [-175.81925, 52.74459], [-175.82686, 52.74438000000001], [-175.83638, 52.744130000000006], [-175.84269, 52.743959999999994], [-175.85279, 52.7437], [-175.8827, 52.74305], [-175.88765, 52.74296], [-175.90731, 52.74245], [-175.97227, 52.74094], [-175.98537, 52.7406], [-176.0401, 52.739219999999996], [-176.07818999999998, 52.73826999999999], [-176.302, 52.732209999999995], [-176.49919, 52.72648], [-176.50402, 52.726330000000004], [-176.50903, 52.72615], [-176.52822, 52.72558000000001], [-176.53452, 52.72543], [-176.53926, 52.7253], [-176.58977, 52.72373], [-176.66134, 52.72169], [-176.67199, 52.72136], [-176.68138000000002, 52.72107], [-176.68652, 52.720890000000004], [-176.69371999999998, 52.72071], [-176.69884, 52.72051], [-176.70393, 52.72039], [-176.70896000000002, 52.720209999999994], [-176.71341, 52.72009], [-176.71817, 52.719919999999995], [-176.72328000000002, 52.71974], [-176.7282, 52.71963], [-176.7339, 52.71941999999999], [-176.73949, 52.719269999999995], [-176.74453, 52.719080000000005], [-176.74909, 52.718990000000005], [-176.75401000000002, 52.71881], [-176.75898, 52.71864], [-176.76416, 52.71846], [-176.76916, 52.718340000000005], [-176.77431, 52.71816999999999], [-176.78085, 52.717940000000006], [-176.78679, 52.717769999999994], [-176.79269, 52.717530000000004], [-176.7973, 52.71739], [-176.80218, 52.717240000000004], [-176.80732, 52.71706999999999], [-176.81261999999998, 52.7169], [-176.81777, 52.716730000000005], [-176.82305, 52.716530000000006], [-176.82838999999998, 52.71635], [-176.83364, 52.716159999999995], [-176.83878, 52.71595], [-176.84412, 52.71576999999999], [-176.84925, 52.71559], [-176.85402, 52.715430000000005], [-176.85858000000002, 52.71525], [-176.86301, 52.71515], [-176.86818, 52.714969999999994], [-176.87332, 52.71485], [-176.87826, 52.71473], [-176.88352, 52.71455], [-176.88869, 52.71439], [-176.89372, 52.7142], [-176.89978, 52.71399], [-176.90481, 52.71383], [-176.91011, 52.71366], [-176.91521, 52.71346], [-176.92186999999998, 52.713190000000004], [-176.92677, 52.713069999999995], [-176.93203, 52.71289], [-176.93713, 52.712680000000006], [-176.94291, 52.712509999999995], [-176.94736, 52.712430000000005], [-176.95217, 52.71228000000001], [-176.95731, 52.71208000000001], [-176.96251, 52.7119], [-176.96767, 52.71171999999999], [-176.9725, 52.71159], [-176.97711, 52.71141], [-176.98225, 52.7112], [-176.98748, 52.71102], [-177.00116, 52.71063], [-177.0089, 52.71043], [-177.01369, 52.71025], [-177.02063, 52.71001], [-177.05643999999998, 52.708940000000005], [-177.08211, 52.70815], [-177.09517, 52.70783], [-177.10281, 52.707609999999995], [-177.10978, 52.70738000000001], [-177.11768999999998, 52.70713000000001], [-177.12337, 52.70695], [-177.13146, 52.70673000000001], [-177.14156, 52.70639], [-177.15231, 52.706030000000005], [-177.15798, 52.705830000000006], [-177.1631, 52.70568000000001], [-177.1767, 52.70521], [-177.18121000000002, 52.70503000000001], [-177.18751, 52.7047], [-177.19245, 52.70463], [-177.19746999999998, 52.70436], [-177.20211, 52.70415], [-177.20655, 52.704130000000006], [-177.21728000000002, 52.7038], [-177.2223, 52.703630000000004], [-177.22746999999998, 52.70349], [-177.23236, 52.703340000000004], [-177.23678999999998, 52.70325], [-177.24196, 52.703109999999995], [-177.24701000000002, 52.70295], [-177.25271999999998, 52.70267], [-177.25798, 52.70251], [-177.26676, 52.70221], [-177.27406000000002, 52.702009999999994], [-177.28211000000002, 52.701809999999995], [-177.28781999999998, 52.701640000000005], [-177.29294, 52.70151], [-177.2977, 52.70134], [-177.30253000000002, 52.701190000000004], [-177.30878, 52.70095], [-177.31372, 52.70077], [-177.31897, 52.70056999999999], [-177.3237, 52.700419999999994], [-177.3288, 52.70026], [-177.34623, 52.699690000000004], [-177.35468, 52.699369999999995], [-177.38148999999999, 52.69846], [-177.39428, 52.69809], [-177.40979, 52.69753000000001], [-177.45695, 52.695719999999994], [-177.48921, 52.69465], [-177.49944, 52.6943], [-177.52674, 52.69344], [-177.53163, 52.6933], [-177.54215, 52.692930000000004], [-177.55366, 52.69256], [-177.56273000000002, 52.692130000000006], [-177.585, 52.69141], [-177.58988, 52.69118], [-174.00081, 52.48141], [-174.00682, 52.481080000000006], [-174.01122, 52.4808], [-174.01619, 52.480509999999995], [-174.02771, 52.47985], [-174.03295, 52.479569999999995], [-174.03772, 52.47928], [-174.04234, 52.479009999999995], [-174.04661000000002, 52.47878000000001], [-174.08524, 52.476580000000006], [-175.03251, 52.33712], [-175.03692, 52.33636], [-175.06111, 52.33217], [-175.06544, 52.33143], [-175.06988, 52.33062], [-175.07432, 52.32989], [-175.07946, 52.32898], [-175.08611000000002, 52.32784], [-175.09188, 52.326840000000004], [-175.09703000000002, 52.32594], [-175.10151000000002, 52.325179999999996], [-175.1176, 52.322359999999996], [-175.12203, 52.32157], [-175.12771, 52.32055], [-175.13963, 52.318490000000004], [-175.14415, 52.31775], [-175.14863, 52.317009999999996], [-175.15306999999999, 52.31621], [-175.17303, 52.312740000000005], [-175.2009, 52.307590000000005], [-175.2061, 52.306670000000004], [-175.22526000000002, 52.3035], [-175.23295, 52.302170000000004], [-175.23799, 52.30131], [-175.24625, 52.29991], [-175.25059, 52.29923], [-175.2552, 52.29845], [-175.25949, 52.29769], [-175.26448, 52.296820000000004], [-175.26889, 52.29605], [-175.27327, 52.29529], [-175.27771, 52.29452], [-175.28208, 52.29375], [-175.2864, 52.29299], [-175.29079, 52.29224], [-175.29511000000002, 52.29148], [-175.30008, 52.29057], [-175.30436, 52.28983], [-175.32164, 52.28679], [-175.32655, 52.285920000000004], [-175.33084, 52.28519], [-175.34267, 52.2831], [-175.34768, 52.2822], [-175.4098, 52.27111], [-175.41409, 52.27035], [-175.4231, 52.26876], [-175.43084, 52.267379999999996], [-175.43526, 52.26663], [-175.4415, 52.26552], [-175.46665, 52.261070000000004], [-175.47115, 52.260259999999995], [-175.47762, 52.259170000000005], [-175.48533, 52.25781], [-175.4906, 52.25687], [-175.49505, 52.25607], [-175.50544, 52.25424], [-175.51255, 52.252990000000004], [-175.51723, 52.252179999999996], [-175.52178, 52.25137], [-175.52625, 52.25059], [-175.53212, 52.249559999999995], [-175.53677, 52.248740000000005], [-175.54182, 52.247859999999996], [-175.54859, 52.2467], [-175.55318, 52.245909999999995], [-175.55704, 52.24525], [-175.56145, 52.24445], [-175.56611999999998, 52.24361], [-175.57272, 52.242459999999994], [-175.57779, 52.24153], [-175.58243000000002, 52.2407], [-175.58765, 52.23979], [-175.59225, 52.23897], [-175.59669, 52.23819], [-175.60127, 52.23738], [-175.60712, 52.2363], [-175.61173, 52.235490000000006], [-175.61619, 52.23472], [-175.62081, 52.2339], [-175.62548, 52.23304], [-175.6307, 52.23212], [-175.63521, 52.23131], [-175.64315, 52.229890000000005], [-175.64906000000002, 52.22883], [-175.65368999999998, 52.228], [-175.65838, 52.22716], [-175.66507, 52.226009999999995], [-175.66956000000002, 52.225190000000005], [-175.67428999999998, 52.224340000000005], [-175.67895, 52.22352], [-175.68347, 52.22269], [-175.68816, 52.22183], [-175.6929, 52.22099], [-175.69749, 52.22019], [-175.70217, 52.21931], [-175.7068, 52.21849], [-175.71345, 52.21731], [-175.71817, 52.216440000000006], [-175.72287, 52.21563], [-175.72751, 52.21479], [-175.73221999999998, 52.21395], [-175.73751000000001, 52.21301], [-175.7421, 52.21218], [-175.74669, 52.21134], [-175.75118, 52.21052], [-175.75593, 52.20968], [-175.76043, 52.208859999999994], [-175.76498999999998, 52.20802], [-175.77011000000002, 52.20708], [-175.77408, 52.20632], [-175.7797, 52.205259999999996], [-175.78484, 52.20432], [-175.78921, 52.203540000000004], [-175.79381, 52.20272], [-175.79835, 52.20196], [-175.80297, 52.20118], [-175.80751, 52.20042], [-175.81219, 52.1996], [-175.81661, 52.19877], [-175.82052, 52.19808], [-175.82667, 52.19697], [-175.83113, 52.19612], [-175.83713999999998, 52.19493], [-175.84171, 52.19402], [-175.84641000000002, 52.19319], [-175.85082, 52.19243], [-175.8563, 52.19144], [-175.86088, 52.1906], [-175.86567, 52.18969], [-175.87024, 52.188829999999996], [-175.87481, 52.188], [-175.88007, 52.18703], [-175.88478999999998, 52.1862], [-175.88946, 52.18538], [-175.89418, 52.1846], [-175.89868, 52.18377], [-175.90353000000002, 52.18287], [-175.90816999999998, 52.18202], [-175.91272, 52.18124], [-175.91749, 52.18039], [-175.92218, 52.17955], [-175.92691000000002, 52.17872], [-175.93167, 52.17791], [-175.93631000000002, 52.17711], [-175.94095, 52.17626], [-175.94586, 52.1754], [-175.95051999999998, 52.17454], [-175.95463, 52.1738], [-175.95921, 52.17293], [-175.96398, 52.172090000000004], [-175.96864, 52.17125], [-175.97316999999998, 52.1704], [-175.97801, 52.169540000000005], [-175.98259, 52.16865], [-175.98731999999998, 52.167809999999996], [-175.9921, 52.16695], [-175.99685, 52.166090000000004], [-176.00153999999998, 52.16523], [-176.00638999999998, 52.16435], [-176.0111, 52.16352], [-176.01592, 52.16263], [-176.02068, 52.16175], [-176.02533, 52.160920000000004], [-176.03017, 52.16001], [-176.035, 52.15917], [-176.03993, 52.15824], [-176.0447, 52.157379999999996], [-176.04973999999999, 52.15644], [-176.05459, 52.1556], [-176.05946, 52.15469], [-176.06436000000002, 52.15381], [-176.0693, 52.15289], [-176.07413, 52.15201], [-176.07921000000002, 52.15109], [-176.08406000000002, 52.15019], [-176.08886, 52.1493], [-176.09392, 52.14836], [-176.09893, 52.14748], [-176.10387, 52.14656], [-176.10898999999998, 52.14563], [-176.11401, 52.144709999999996], [-176.11907, 52.143809999999995], [-176.12419, 52.14283], [-176.12923999999998, 52.141909999999996], [-176.13435, 52.14094], [-176.13953999999998, 52.139920000000004], [-176.14446999999998, 52.138909999999996], [-176.14953, 52.13795], [-176.15455, 52.137029999999996], [-176.1595, 52.13597], [-176.16449, 52.13513], [-176.16984, 52.13446], [-176.17489, 52.1338], [-176.18001, 52.133179999999996], [-176.18492, 52.13257], [-176.18986, 52.13197], [-176.19462, 52.13135], [-176.19953, 52.13074], [-176.20442, 52.130140000000004], [-176.20914, 52.12952], [-176.21397, 52.12892], [-176.21867, 52.12833], [-176.22335, 52.127720000000004], [-176.22813, 52.1271], [-176.23277, 52.12655], [-176.23729, 52.12604], [-176.24203, 52.12551], [-176.2465, 52.12494], [-176.25098, 52.124359999999996], [-176.25552, 52.12376], [-176.25987, 52.12322], [-176.26438000000002, 52.12265], [-176.26879, 52.12208], [-176.27323, 52.121520000000004], [-176.27758, 52.12099], [-176.28211000000002, 52.12044], [-176.28638, 52.119890000000005], [-176.29089, 52.11927], [-176.29525, 52.118629999999996], [-176.29968, 52.11793], [-176.30396000000002, 52.117329999999995], [-176.30844, 52.11675], [-176.31275, 52.11616], [-176.31707, 52.11562], [-176.3216, 52.11506], [-176.32607, 52.1145], [-176.33049, 52.11396], [-176.33505, 52.113479999999996], [-176.33938, 52.11293], [-176.34367, 52.11238], [-176.3482, 52.1118], [-176.35254, 52.111270000000005], [-176.35699, 52.11073], [-176.36149, 52.110170000000004], [-176.36567, 52.1096], [-176.3701, 52.10906], [-176.37446, 52.108509999999995], [-176.37881000000002, 52.10794], [-176.38294, 52.10743], [-176.38719, 52.10694], [-176.3914, 52.10644], [-176.39566000000002, 52.105909999999994], [-176.39951000000002, 52.10539], [-176.4036, 52.1049], [-176.40765, 52.10437], [-176.41186000000002, 52.103809999999996], [-176.41627, 52.10326], [-176.42049, 52.10273], [-176.42456, 52.10216], [-176.42834, 52.10171], [-176.43275, 52.10114], [-176.43698999999998, 52.10058], [-176.44131000000002, 52.10001], [-176.44571000000002, 52.099470000000004], [-176.44938, 52.09898], [-176.45375, 52.098440000000004], [-176.45756, 52.09796], [-176.4617, 52.09738], [-176.46602, 52.09683], [-176.47048999999998, 52.09625], [-176.47468999999998, 52.09574], [-176.47916999999998, 52.09518], [-176.48357, 52.094590000000004], [-176.48793999999998, 52.09405], [-176.49236000000002, 52.09345], [-176.49686, 52.09288], [-176.5013, 52.09232], [-176.5058, 52.09173], [-176.51023, 52.09115], [-176.51471999999998, 52.090559999999996], [-176.51926, 52.08996], [-176.52376999999998, 52.08936], [-176.52831, 52.08879], [-176.53297, 52.088159999999995], [-176.53758, 52.08744], [-176.54197, 52.08676], [-176.54655, 52.08615], [-176.551, 52.08554], [-176.55546999999999, 52.084959999999995], [-176.56011, 52.08437], [-176.56457, 52.08384], [-176.56906, 52.08331], [-176.57352, 52.08279], [-176.57797, 52.082190000000004], [-176.58228, 52.08164], [-176.58682, 52.08104], [-176.5911, 52.08052], [-176.59557, 52.080020000000005], [-176.59998000000002, 52.0795], [-176.60394, 52.07901], [-176.60809, 52.07844], [-176.61244, 52.07786], [-176.61697, 52.07728], [-176.62129, 52.0767], [-176.62581, 52.07615], [-176.63026000000002, 52.07558], [-176.63478999999998, 52.07499], [-176.63913, 52.0744], [-176.64371, 52.073840000000004], [-176.64816000000002, 52.07323], [-176.65249, 52.07269], [-176.65698, 52.0721], [-176.66141000000002, 52.071529999999996], [-176.66577, 52.07095], [-176.67025, 52.07032], [-176.67467, 52.06971], [-176.67906000000002, 52.06907], [-176.68357, 52.06842], [-176.68806, 52.067859999999996], [-176.69249, 52.06728], [-176.69698, 52.06669], [-176.70116000000002, 52.06615], [-176.70549, 52.06559], [-176.70986000000002, 52.06504], [-176.71418, 52.06454], [-176.71846000000002, 52.064029999999995], [-176.72288999999998, 52.06343], [-176.72711, 52.06289], [-176.73139, 52.06232], [-176.73549, 52.0618], [-176.73928999999998, 52.06128], [-176.74358999999998, 52.06073], [-176.74771, 52.060179999999995], [-176.75198, 52.05961], [-176.75602, 52.059090000000005], [-176.76021, 52.05853], [-176.76441, 52.058009999999996], [-176.76844, 52.05745], [-176.77246, 52.05692], [-176.77664, 52.05636], [-176.78056999999998, 52.05588], [-176.78465, 52.05533], [-176.78873000000002, 52.05477], [-176.79296000000002, 52.0542], [-176.79708, 52.05363], [-176.80143, 52.05297], [-176.80578, 52.05229], [-176.81003, 52.05167], [-176.81434, 52.05104], [-176.81856000000002, 52.050470000000004], [-176.82272, 52.04994], [-176.82696, 52.04938], [-176.83105, 52.04882], [-176.83511000000001, 52.0483], [-176.83921999999998, 52.04777], [-176.8432, 52.04725], [-176.84714, 52.04676], [-176.85128, 52.04626], [-176.85525, 52.045790000000004], [-176.85915, 52.04531], [-176.86321, 52.0448], [-176.86725, 52.04428], [-176.87126, 52.0438], [-176.87546, 52.0433], [-176.8794, 52.042809999999996], [-176.88343, 52.04227], [-176.88742, 52.041740000000004], [-176.89151999999999, 52.04119], [-176.89542, 52.04065], [-176.89956, 52.04013], [-176.90362, 52.039559999999994], [-176.90717, 52.03909], [-176.91107, 52.03861], [-176.91509, 52.038059999999994], [-176.9192, 52.03753], [-176.9227, 52.03702], [-176.92677, 52.03651], [-176.93088999999998, 52.03595], [-176.93496000000002, 52.0354], [-176.93901, 52.034890000000004], [-176.94324, 52.03432], [-176.94744, 52.03373], [-176.95151, 52.0332], [-176.95577, 52.03263], [-176.95991, 52.032059999999994], [-176.9641, 52.03152], [-176.96827, 52.031], [-176.97249, 52.030409999999996], [-176.97657, 52.02985], [-176.9808, 52.02929], [-176.98488999999998, 52.02874], [-176.98904, 52.028220000000005], [-176.99315, 52.02763], [-176.99702, 52.02713], [-177.00076, 52.02664], [-177.00463, 52.026109999999996], [-177.00861, 52.02557], [-177.0129, 52.025009999999995], [-177.01702, 52.024440000000006], [-177.02107, 52.0239], [-177.02528999999998, 52.02336], [-177.02946, 52.02278], [-177.03355, 52.022220000000004], [-177.03796, 52.02166], [-177.04214, 52.02108], [-177.04574, 52.0206], [-177.04963999999998, 52.02013], [-177.05387, 52.01952], [-177.05763000000002, 52.019], [-177.06167, 52.018440000000005], [-177.06588, 52.0179], [-177.07008000000002, 52.017309999999995], [-177.07426, 52.01678], [-177.07806000000002, 52.01624], [-177.08205, 52.015679999999996], [-177.08622, 52.01505], [-177.09035, 52.01447], [-177.09434, 52.013909999999996], [-177.09848, 52.01331], [-177.10268, 52.01277], [-177.10668, 52.01222], [-177.1107, 52.01169], [-177.11467, 52.01117], [-177.11866, 52.01061], [-177.1228, 52.01005], [-177.12691, 52.00955], [-177.13086, 52.008990000000004], [-177.13494, 52.00841], [-177.13898, 52.0079], [-177.14301, 52.00732], [-177.1472, 52.00678], [-177.1512, 52.0062], [-177.15534, 52.005590000000005], [-177.15941999999998, 52.00488], [-177.16356000000002, 52.00418], [-177.16756999999998, 52.00349], [-177.17172, 52.00275], [-177.17576, 52.00204], [-177.1798, 52.00137], [-177.18403, 52.000609999999995], [-177.18763, 52.000009999999996], [-177.19181, 51.99927], [-177.19602, 51.99852], [-177.20039, 51.99775], [-177.20448000000002, 51.99705], [-177.20879, 51.9963], [-177.21313, 51.99558], [-177.21732, 51.99485], [-177.22141000000002, 51.99415], [-177.22578000000001, 51.99338], [-177.22963000000001, 51.99265], [-177.23341000000002, 51.99197], [-177.23755, 51.99119], [-177.24172, 51.990390000000005], [-177.24593000000002, 51.98968], [-177.24995, 51.989020000000004], [-177.25413999999998, 51.988279999999996], [-177.2582, 51.987559999999995], [-177.26228, 51.98684], [-177.2665, 51.98612], [-177.27061, 51.985409999999995], [-177.27468000000002, 51.98465], [-177.27889, 51.98392], [-177.28267, 51.983340000000005], [-177.28644, 51.98272], [-177.29063, 51.982009999999995], [-177.29478, 51.981320000000004], [-177.2987, 51.98066], [-177.30248, 51.97997], [-177.30652, 51.97927], [-177.31065, 51.978559999999995], [-177.31482, 51.97785], [-177.31891000000002, 51.977109999999996], [-177.32313, 51.97636], [-177.32745, 51.975609999999996], [-177.33151, 51.97487], [-177.3358, 51.97418], [-177.33959, 51.97347], [-177.34338, 51.972809999999996], [-177.34743, 51.97208], [-177.35173, 51.97135], [-177.35595, 51.970620000000004], [-177.36016, 51.96985], [-177.36451, 51.9691], [-177.36836, 51.96846], [-177.37218000000001, 51.96771], [-177.37589, 51.9671], [-177.37982, 51.96634], [-177.38414, 51.965540000000004], [-177.38828, 51.96478], [-177.39245, 51.964], [-177.39674, 51.96317], [-177.40095, 51.96248], [-177.40488, 51.9618], [-177.40886, 51.96119], [-177.41308, 51.96054], [-177.41745, 51.95983], [-177.42179, 51.959179999999996], [-177.42626, 51.95843], [-177.43042, 51.957609999999995], [-177.43476, 51.95685], [-177.4392, 51.95604], [-177.44352, 51.95518], [-177.4479, 51.9544], [-177.45231, 51.953590000000005], [-177.45673, 51.95279], [-177.46105, 51.95199], [-177.46553, 51.951190000000004], [-177.4699, 51.95033], [-177.47421, 51.94957], [-177.47865, 51.948840000000004], [-177.48259, 51.94765], [-177.4861, 51.94658], [-177.48991999999998, 51.94539], [-177.49388000000002, 51.94416], [-177.4978, 51.94291], [-177.50175, 51.941629999999996], [-177.50576, 51.9403], [-177.50952, 51.9391], [-177.51279, 51.93805], [-177.51635, 51.9369], [-177.52018999999999, 51.93565], [-177.52424, 51.934329999999996], [-177.52826000000002, 51.93305], [-177.53218999999999, 51.93181], [-177.53618, 51.93046], [-177.54007, 51.92923], [-177.54398, 51.927929999999996], [-177.54763, 51.92677], [-177.55119, 51.92564], [-177.55512, 51.92431], [-177.55898, 51.922990000000006], [-177.56301000000002, 51.921640000000004], [-177.56696000000002, 51.92029], [-177.57092, 51.919109999999996], [-177.57424, 51.91798], [-177.57786000000002, 51.91683], [-177.58192, 51.915490000000005], [-177.5861, 51.914159999999995], [-177.59024, 51.91279], [-177.5946, 51.911390000000004], [-177.5987, 51.91004], [-177.60294, 51.90874], [-177.60738999999998, 51.90723], [-177.61144, 51.90594], [-177.61569, 51.90456], [-177.62, 51.90316], [-177.62458, 51.90168], [-177.62893, 51.90028], [-177.63348, 51.89881], [-177.63808, 51.89733], [-177.64281, 51.89581], [-177.64741999999998, 51.89434], [-177.65212, 51.89283], [-177.65666000000002, 51.89145], [-177.6717, 51.88649], [-177.67605, 51.88514], [-177.68074, 51.883590000000005], [-177.70956, 51.874159999999996], [-177.71417, 51.872609999999995], [-177.71878, 51.87102], [-177.72227, 51.86903], [-177.72562, 51.86718], [-177.72903, 51.86517], [-177.73076, 51.86287], [-177.73187, 51.86061], [-177.73248999999998, 51.859], [-177.73311, 51.85754], [-177.73372, 51.85631], [-177.73451, 51.85518], [-177.73498, 51.85409], [-177.73542, 51.85317], [-177.73549, 51.85225], [-177.73561, 51.8511], [-177.73582, 51.85005], [-177.73608000000002, 51.84902], [-177.7364, 51.84805], [-177.73666, 51.84705], [-177.73668, 51.846070000000005], [-177.73694, 51.84516], [-177.73666, 51.84438], [-177.73646000000002, 51.84339], [-177.73628, 51.84228], [-177.73616, 51.84108], [-177.73585, 51.839490000000005], [-177.73478, 51.83817], [-177.73651, 51.838], [-177.73716000000002, 51.83798], [-177.73769, 51.83842], [-177.73753, 51.838609999999996], [-177.73743000000002, 51.83879], [-177.73726000000002, 51.83893], [-177.73712, 51.839040000000004], [-177.73723999999999, 51.839009999999995], [-177.73718, 51.83902], [-177.7372, 51.83903], [-177.73738, 51.83887], [-177.7373, 51.83899], [-177.73723999999999, 51.839040000000004], [-177.7372, 51.83905], [-177.73712, 51.83909], [-177.73734, 51.83896], [-177.73728, 51.839], [-177.73719, 51.83907], [-177.73716000000002, 51.839059999999996], [-177.73737, 51.83891], [-177.73738, 51.839], [-177.73734, 51.83902], [-177.73736, 51.83896], [-177.73729, 51.839079999999996], [-177.73727, 51.839040000000004], [-177.73731, 51.83909], [-177.73721, 51.83911], [-177.73734, 51.839079999999996], [-177.73733000000001, 51.839059999999996], [-177.73733000000001, 51.839079999999996], [-177.73723, 51.83911], [-177.73734, 51.839040000000004], [-177.73723, 51.8391], [-177.7373, 51.83911], [-177.73723, 51.83917], [-177.73739, 51.83905], [-177.73727, 51.83914], [-177.73726000000002, 51.83915], [-177.73744, 51.83902], [-177.73734, 51.83912], [-177.73729, 51.83917], [-177.73751000000001, 51.83898], [-177.73747, 51.83905]];

mapboxgl.accessToken = 'pk.eyJ1Ijoiam9laGFhZ2EiLCJhIjoiY2ptZTB2YnRuMHN1djNrbzEydTkxcWZjMCJ9.daVq3TZyQbvYy7FqACATkg';
var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v9',
    center: pathAData[0],
    zoom: 7
});

// San Francisco
var origin = pathAData[0];

// Washington DC
var destination = pathAData[pathAData.length - 1];

var originB = pathBData[0];
var destinationB = pathBData[pathBData.length - 1];

// A simple line from origin to destination.
var route = {
    "type": "FeatureCollection",
    "features": [{
        "type": "Feature",
        "geometry": {
            "type": "LineString",
            "coordinates": pathAData
        }
    }]
};
var routeB = {
    "type": "FeatureCollection",
    "features": [{
        "type": "Feature",
        "geometry": {
            "type": "LineString",
            "coordinates": pathBData
        }
    }]
};

// A single point that animates along the route.
// Coordinates are initially set to origin.
var point = {
    "type": "FeatureCollection",
    "features": [{
        "type": "Feature",
        "properties": {},
        "geometry": {
            "type": "Point",
            "coordinates": origin
        }
    }]
};

var pointB = {
    "type": "FeatureCollection",
    "features": [{
        "type": "Feature",
        "properties": {},
        "geometry": {
            "type": "Point",
            "coordinates": originB
        }
    }]
};


// Calculate the distance in kilometers between route start/end point.
var lineDistance = turf.lineDistance(route.features[0], 'kilometers');
var lineDistanceB = turf.lineDistance(routeB.features[0], 'kilometers');

var arc = [];

// Number of steps to use in the arc and animation, more steps means
// a smoother arc and animation, but too many steps will result in a
// low frame rate
var steps = 500;

// Draw an arc between the `origin` & `destination` of the two points
for (var i = 0; i < lineDistance; i += lineDistance / steps) {
    var segment = turf.along(route.features[0], i, 'kilometers');
    arc.push(segment.geometry.coordinates);
}
for (var i = 0; i < lineDistanceB; i += lineDistanceB / steps) {
    var segment = turf.along(routeB.features[0], i, 'kilometers');
    arc.push(segment.geometry.coordinates);
}

// Update the route with calculated arc coordinates
route.features[0].geometry.coordinates = arc;
routeB.features[0].geometry.coordinates = arc;

// Used to increment the value of the point measurement against the route.
var counter = 0;

map.on('load', function () {
    // Add a source and layer displaying a point which will be animated in a circle.
    map.addSource('route', {
        "type": "geojson",
        "data": route
    });
    map.addSource('routeB', {
        "type": "geojson",
        "data": routeB
    });

    map.addSource('point', {
        "type": "geojson",
        "data": point
    });
    map.addSource('pointB', {
        "type": "geojson",
        "data": pointB
    });

    map.addLayer({
        "id": "route",
        "source": "route",
        "type": "line",
        "paint": {
            "line-width": 2,
            "line-color": "#007cbf"
        }
    });
    map.addLayer({
        "id": "routeB",
        "source": "routeB",
        "type": "line",
        "paint": {
            "line-width": 2,
            "line-color": "#007cbf"
        }
    });


    map.addLayer({
        "id": "point",
        "source": "point",
        "type": "symbol",
        "layout": {
            "icon-image": "airport-15",
            "icon-rotate": ["get", "bearing"],
            "icon-rotation-alignment": "map",
            "icon-allow-overlap": true,
            "icon-ignore-placement": true
        }
    });
    map.addLayer({
        "id": "pointB",
        "source": "pointB",
        "type": "symbol",
        "layout": {
            "icon-image": "airport-15",
            "icon-rotate": ["get", "bearing"],
            "icon-rotation-alignment": "map",
            "icon-allow-overlap": true,
            "icon-ignore-placement": true
        }
    });

    function animate() {
        // Update point geometry to a new position based on counter denoting
        // the index to access the arc.
        point.features[0].geometry.coordinates = route.features[0].geometry.coordinates[counter];
        pointB.features[0].geometry.coordinates = routeB.features[0].geometry.coordinates[counter];
        // Calculate the bearing to ensure the icon is rotated to match the route arc
        // The bearing is calculate between the current point and the next point, except
        // at the end of the arc use the previous point and the current point
        point.features[0].properties.bearing = turf.bearing(
            turf.point(route.features[0].geometry.coordinates[counter >= steps ? counter - 1 : counter]),
            turf.point(route.features[0].geometry.coordinates[counter >= steps ? counter : counter + 1])
        );
        pointB.features[0].properties.bearing = turf.bearing(
            turf.point(routeB.features[0].geometry.coordinates[counter >= steps ? counter - 1 : counter]),
            turf.point(routeB.features[0].geometry.coordinates[counter >= steps ? counter : counter + 1])
        );

        // Update the source with this new data.
        map.getSource('point').setData(point);
        map.getSource('pointB').setData(pointB);

        // Request the next frame of animation so long the end has not been reached.
        if (counter < steps) {
            requestAnimationFrame(animate);
        }

        counter = counter + 1;
    }

    document.getElementById('replay').addEventListener('click', function() {
        // Set the coordinates of the original point back to origin
        point.features[0].geometry.coordinates = origin;
        pointB.features[0].geometry.coordinates = origin;
        // Update the source layer
        map.getSource('point').setData(point);
        map.getSource('pointB').setData(pointB);
        // Reset the counter
        counter = 0;

        // Restart the animation.
        animate(counter);
    });

    // Start the animation.
    animate(counter);
});
</script>

</body>
</html>
